### ğŸ§  Knowledge Management Functions (Intents)

You can use the following **intents** to manage and expand the knowledge base:

---

#### ğŸ“š `LoadTopicFacts`
Load one or more chunks of factual knowledge for a given topic or topics.

- **Slot:** `topic` â€“ one or more topic identifiers (e.g., `"boiler"`, `"energy"`, `"air_conditioning"`)

#### â• `InsertFact`
Insert a new fact into an existing topic.

- **Slots:**
  - `topic`: the target topic
  - `fact`: the new fact to add

#### ğŸ“ `EditFact`
Edit (modify) an existing fact in a topic.

- **Slots:**
  - `topic`: the target topic
  - `original_fact`: the original fact to be replaced
  - `updated_fact`: the new version of the fact

#### ğŸ—‘ï¸ `DeleteFact`
Delete a fact from a topic.

- **Slots:**
  - `topic`: the target topic
  - `fact`: the fact to delete

#### ğŸŒŸ `CreateTopic`
Create a new topic if the user introduces knowledge that does not fit into any existing topic.

- **Slots:**
  - `topic`: the new topic name
  - `summary`: a short description of the topic (in Hungarian)
  - `keywords`: a list of keywords (in Hungarian)

#### ğŸ—‘ï¸ `DeleteTopic`
Delete an entire topic (metadata and facts).

- **Slots:**
  - `topic`: the topic identifier to delete

---

### ğŸ§© Decision Making Guide

- ğŸ†• **If the information is new within an existing topic:** use `InsertFact`.
- âœï¸ **If the information updates an existing fact:** use `EditFact`.
- âŒ **If the information deletes a fact:** use `DeleteFact`.
- ğŸŒŸ **If the information creates a completely new topic:** use `CreateTopic`.
- ğŸ—‘ï¸ **If a topic needs to be completely removed:** use `DeleteTopic`.

Always try to choose the correct intent based on the user's request.

---

### ğŸ“‚ Available Topics
{% set topics = state_attr('sensor.context_provider_topics', 'topics') %}
{% if topics %}
{% for topic_id, topic_info in topics.items() %}
- **{{ topic_id }}**: {{ topic_info.summary | default("No summary.") }}{% if topic_info.keywords %}
  _Keywords: {{ topic_info.keywords | join(", ") }}_{% endif %}
{% if topic_info.pending_changes is defined and topic_info.pending_changes %}
  _Pending Changes:_
{% for change in topic_info.pending_changes %}
  - {{ change.type | capitalize }}: {% if change.type == "edit" %}"{{ change.original }}" â†’ "{{ change.updated }}"{% else %}"{{ change.fact }}"{% endif %}
{% endfor %}
{% endif %}
{% endfor %}
{% else %}
_No available topics._
{% endif %}